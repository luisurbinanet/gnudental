#summary Getting started with GNUdental(tm)

= Introduction =

This page will help you get started with GNUdental^TM^ on your Linux computer.

= Development Environment =

First you need to set your development environment properly. Instructions below use an Ubuntu-6.10 installation as an example. Your GNU/Linux distribution may use different names, package management and conventions; use the following as suggestions.

== Development tools and libraries ==
If you are running ubuntu, you would typically do:

`sudo apt-get install
subversion
build-essential
automake1.9
autoconf
libexif-dev
libexpat1-dev
libfontconfig1-dev
libfreetype6-dev
libjpeg62-dev
libpng12-dev
libtiff4-dev
libtiffxx0c2 
libungif4-dev
libxft-dev
libxrender-dev
x11proto-render-dev
autotools-dev 
bison
dpatch
libtool
libxml2-dev
libxml2-dev
libxslt1-dev
m4
mono
mono-gmcs
mono-gac
mono-utils`

*Notes:*
 # Mono is currently in the universe repository. Make sure you enable this repository. 
 # You currently need to have the latest version of Mono installed on your computer. To build Mono from SVN, you first need to have a Mono runtime and C# compiler installed on your computer.

== Mono ==
To successfully build GNUdental^TM^ you need the SVN version of libgdiplus, mono and mcs.
Follow these instructions for [http://www.mono-project.com/Compiling_Mono compiling mono].

*Check out and build* libgdiplus, mono and mcs modules. 
Run `make` but *do not* run `make install` yet.

If you encounter any problem, that's most likely because of a missing dependency. 

*_Do not proceed if you cannot build Mono from source!_*

*Remove the pre-build version of Mono.*

On Ubuntu:
{{{
sudo apt-get remove mono mono-gmcs mono-gac mono-utils
}}}

*Install libgdiplus and mono*
{{{
cd ../libgdiplus
sudo make install
cd ../mono
sudo make install
}}}

*Which resgen?*

Run
{{{
cat `which resgen`
}}}
and see if it invokes `resgen.exe` that is under `/monodir/1.0` or
`/monodir/2.0`. It should be `/monodir/2.0`.

You will find two resgen scripts under `/usr/local/bin` (assuming you installed mono under `/usr/local`): `resgen` pointing to `/monodir/1.0` and `resgen2` pointing to `/monodir/2.0`. Rename `resgen` to `resgen1` and symlink `resgen2` to `resgen`.

{{{
sudo mv /usr/local/bin/resgen /usr/local/bin/resgen1
sudo ln -s /usr/local/bin/resgen2 /usr/local/bin/resgen
}}}

Now run `resgen` and see if it supports the `/useSourcePath`.

If it does then you're ok.

== Nant ==
[http://nant.sourceforge.net NAnt] is used to build GNUdental^TM^. NAnt probably already ships with your distribution, but you need the latest development version (Nightly Build). It is recommented to download the Latest Nightly Build binary; currently [http://nant.sourceforge.net/nightly/latest/nant-bin.tar.gz nant-0.86-nightly-2007-03-08]  and follow [http://nant.sourceforge.net/nightly/latest/help/introduction/installation.html these installation instructions].

*Change NAnt.exe.config:*

Run

{{{
pkg-config --modversion mono
}}}

If it returns 1.2.3, you should be all set. 

_If it returns 1.2.3.50_ _*then*_ you need to overcome a bug in NAnt that makes it invoke an old version of resgen, by doing the following:

To find out where NAnt.exe.config is, do
{{{
cat `which nant`
}}}
and find out where `NAnt.exe` hides. Propably, in `/usr/local/nant/bin` if you followed  the above instructions. In that same directory, open
`NAnt.exe.config` and modify it like described in this bug report:
 http://sourceforge.net/tracker/index.php?func=detail&aid=1688162&group_id=31650&atid=402868

(Basically, replace every 1.2.4 by 1.2.3.50).

You are now ready to go!

= Building GNUdental(tm) =

First, you need to [http://code.google.com/p/gnudental/source check out gnudental svn repository]. This will create a directory gnudental.

Then, you'll need some dll files.  We are currently basing our build on v4.6.19 of Open Dental, so download http://www.gnudental.org/ODSource-4-6-19.zip and unzip it. For the sake of the following, the directory where you unzip ODSource and the directory where you checked out the sources of GNUdental^TM^ are the same.

Copy the required dll's from ODSource tree to gnudental source tree. Change to the working directory and do the following:

{{{
cp -a ODSource-4-6-19/Required\ dlls/ gnudental/
cp -a ODSource-4-6-19/SparksToothChart/RequiredDlls/ gnudental/SparksToothChart/
cp -a ODSource-4-6-19/SparksToothChart/TestForm/RequiredDlls/ gnudental/SparksToothChart/TestForm/
}}}

Next, you'll need to download {{{Tao-1.3.0-1 Release}}} in your preferred format from http://www.taoframework.com/Downloads and then unzip it and copy {{{Tao.OpenGl.ExtensionLoader.dll}}} to {{{gnudental/Required dlls/}}} and {{{gnudental/SparksToothChart/RequiredDlls/}}}.

Now you are ready to build:

{{{
export MONO_IOMAP=all
make
}}}

It'll start the build and invoke NAnt.

If the build breaks, check for previously [http://code.google.com/p/gnudental/issues/list reported issues]

= Creating the GNUdental(TM) directories =

It is recommended you create a directory structure like this:
  * /home/user/gnudental/data
  * /home/user/gnudental/data/A
  * /home/user/gnudental/data/...
  * /home/user/gnudental/data/Z
  * /home/user/gnudental/export
  * /home/user/gnudental/letter

= Installing the MySQL(R) database =

Get MySQL(R) from your distribution. GNUdental^TM^ uses the same database structure as Open Dental. You can get the database creation script from [http://www.open-dent.com/opendental.sql].

You'll need to modify the script a little. Remove this:
{{{
/*
MySQL Backup
Source Host:           localhost
Source Server Version: 4.1.10-nt
Source Database:       opendental
Date:                  2005/03/29 07:56:53
*/
}}}
and replace it with
{{{
create database opendental
}}}

Then, run
{{{
mysql -h localhost -u root < opendental.sql
}}}

= Running GNUdental(TM) for the first time =
The first time you run GNUdental^TM^, you'll be asked to upgrade your database. Accept to do so. For the data directories, enter the directories you created above. Remember to include a trailing "/" after the directory name. If not, GNUdental^TM^ will complain.











































