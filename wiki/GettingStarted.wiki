#summary Getting started with GNUdental

= Introduction =

This page will help you get started with GNUdental on your Linux computer.

= Getting Mono =

== Bootstrapping ==
You currently need to have the latest version of Mono installed on your computer. To build Mono from SVN, you first need to have the Mono runtime and C# compiler installed on your computer. 

If you are running ubuntu, you would typically do
{{{
sudo apt-get install mono mono-gmcs mono-gac mono-utils
}}}

*Note:*
 Mono is currently in the universe repository. Make sure you enable this repository.

== Get the latest version from SVN ==
Then, check out Mono from SVN. First you'll need to install [http://subversion.tigris.org Subversion].
If you are running ubuntu, you would typically do
{{{
sudo apt-get install subversion
}}}

You'll need the libgdiplus, mono and mcs modules. See [http://www.mono-project.com/SVN] for more information.

If you are running ubuntu, you would typically do
{{{
svn co svn://svn.myrealbox.com/source/trunk/libgdiplus
svn co svn://svn.myrealbox.com/source/trunk/mono
svn co svn://svn.myrealbox.com/source/trunk/mcs
}}}

There is more! To build mono, you need to have quite some packages installed. Here's a partial list of Ubuntu packages.

== List of required packages ==
*Build tools:*
 * `automake1.9`
 * `autoconf`

*For libgdiplus:*
 * `libexif-dev`
 * `libexpat1-dev`
 * `libfontconfig1-dev`
 * `libfreetype6-dev`
 * `libjpeg62-dev`
 * `libpng12-dev`
 * `libtiff4-dev`
 * `libtiffxx0c2`
 * `libungif4-dev`
 * `libxft-dev`
 * `libxrender-dev`
 * `x11proto-render-dev`

*For mono:*
 * `autotools-dev`
 * `bison`
 * `dpatch`
 * `libtool`
 * `libxml2-dev`
 * `libxslt1-dev`
 * `m4`

== Building Mono ==
To build mono, you would do this:
{{{
cd libgdiplus
./autogen.sh
make
cd ../mono
./autogen.sh
make
}}}

Why in the reverse order described here: http://www.mono-project.com/Compiling_Mono ?

I propose:
{{{
cd mono
./autogen.sh --prefix=/usr/local (or wherever)
make
cd ../libgdiplus
./autogen.sh --prefix=/usr/local (or wherever)
make
}}}

If you use a different prefix then you may need to adjust your LD_LIBRARY_PATH environment variable to ensure libgdiplus.so can be loaded.

{{{
export LD_LIBRARY_PATH=/your/own/prefix:$LD_LIBRARY_PATH
}}}


If you encounter any problem, that's most likely because of a missing dependency. Don't proceed as long as you can't build Mono from source!

== Removing the pre-build version of Mono ==
You can now remove the pre-build version of Mono. On Ubuntu:
{{{
sudo apt-get remove mono mono-gmcs mono-gac mono-utils
}}}

== Installing Mono ==
{{{
cd ../libgdiplus
sudo make install
cd ../mono
sudo make install
}}}

You are now ready to go!

= Getting NAnt =

NAnt is used to build GNUdental. NAnt probably already ships with your distribtuion. If not, visit [http://nant.sourceforge.net] to download NAnt.

= Building =

First, you'll need some dll files.  We are currently basing our build on v4.6.19 of Open Dental, so download http://www.gnudental.org/ODSource-4-6-19.zip and unzip it in a directory, say "od".  For the sake of the following, the directory where you checked out the sources of gnudental will be called "gd".

For each directory that recursively matches the bash expansion: {{{Required*}}} in od where there is not a correspondingly named directory in gd, copy over that directory to its corresponding relative path in gd.  Or you can just do the following which is much easier to say:

{{{
$ cp -a od/gnudental/Required\ dlls/ gd/gnudental/
$ cp -a od/gnudental/SparksToothChart/RequiredDlls/ gd/gnudental/SparksToothChart/
$ cp -a od/gnudental/SparksToothChart/TestForm/RequiredDlls/ gd/gnudental/SparksToothChart/TestForm/
}}}

Next, you'll need to download {{{Tao-1.3.0-1 Release}}} in your preferred format from http://www.taoframework.com/Downloads and then unzip it and copy {{{Tao.OpenGl.ExtensionLoader.dll}}} to {{{gd/gnudental/Required dlls/}}} and {{{gd/gnudental/SparksToothChart/RequiredDlls/}}}.

Now run `make`. It'll start the build and invoke NAnt.  If the build breaks, check for bugs here: http://code.google.com/p/gnudental/issues/list

= Creating the gnudental directories =

It is recommended you create a directory structure like this:
  * /home/user/gnudental/data
  * /home/user/gnudental/data/A
  * /home/user/gnudental/data/...
  * /home/user/gnudental/data/Z
  * /home/user/gnudental/export
  * /home/user/gnudental/letter

= Installing the mySQL database =

Get mySQL from your distribution. GNUdental uses the same database structure as Open Dental. You can get the database creation script from [http://www.open-dent.com/opendental.sql].

You'll need to modify the script a little. Remove this:
{{{
/*
MySQL Backup
Source Host:           localhost
Source Server Version: 4.1.10-nt
Source Database:       opendental
Date:                  2005/03/29 07:56:53
*/
}}}
and replace it with
{{{
create database opendental
}}}

Then, run
{{{
mysql -h localhost -u root < opendental.sql
}}}

= Running GNUdental for the first time =
The first time you run GNUdental, you'll be asked to upgrade your database. Accept to do so. For the data directories, enter the directories you created above. Remember to include a trailing "/" after the directory name. If not, GNUdental will complain.





